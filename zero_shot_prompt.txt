(function(){
	'use strict';

	/**
	 * Convert a string to snake_case (lowercase, words separated by underscores).
	 * @param {string} input
	 * @returns {string}
	 * @throws {TypeError} when input is null/undefined/non-string/empty
	 */
	function toSnakeCase(input) {
		if (input === null || input === undefined) {
			throw new TypeError('toSnakeCase: input is null or undefined; expected a non-empty string');
		}
		if (typeof input !== 'string') {
			throw new TypeError('toSnakeCase: input must be a string');
		}

		const trimmed = input.trim();
		if (trimmed.length === 0) {
			throw new TypeError('toSnakeCase: input must be a non-empty string');
		}

		// Handle camelCase boundaries
		const withBoundaries = trimmed.replace(/([a-z0-9])([A-Z])/g, '$1 $2');

		// Split on any non-alphanumeric sequence and join with underscores
		const parts = withBoundaries.split(/[^A-Za-z0-9]+/).filter(Boolean);
		if (parts.length === 0) {
			throw new TypeError('toSnakeCase: input does not contain any alphanumeric characters');
		}

		return parts.map(p => p.toLowerCase()).join('_');
	}

	// Example usage
	const examples = [
		{ input: 'First Name', output: 'first_name' },
		{ input: 'user-id', output: 'user_id' }
	];

	if (typeof module !== 'undefined' && module.exports) {
		module.exports = { toSnakeCase, examples };
	} else {
		this.toSnakeCase = toSnakeCase;
		this.toSnakeCaseExamples = examples;
	}

})();

